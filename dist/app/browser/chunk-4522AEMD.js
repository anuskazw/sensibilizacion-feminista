import{L as r,Lb as n,P as i,dc as l,ha as o}from"./chunk-UMI3KQKL.js";var c=class t{constructor(e){this.translate=e;this.initLanguage()}availableLanguages=[{code:"es",name:"Espa\xF1ol"},{code:"en",name:"English"},{code:"ca",name:"Catal\xE0"},{code:"val",name:"Valenci\xE0"},{code:"gl",name:"Galego"},{code:"eu",name:"Euskara"}];STORAGE_KEY="preferred-language";DEFAULT_LANGUAGE="es";initLanguage(){this.translate.addLangs(this.availableLanguages.map(a=>a.code));let e=this.getSavedLanguage();if(e&&this.isLanguageSupported(e))this.setLanguage(e);else{let a=this.detectBrowserLanguage();this.setLanguage(a)}}detectBrowserLanguage(){let e=this.translate.getBrowserLang();return e&&this.isLanguageSupported(e)?e:this.DEFAULT_LANGUAGE}isLanguageSupported(e){return this.availableLanguages.some(a=>a.code===e)}getSavedLanguage(){return localStorage.getItem(this.STORAGE_KEY)}saveLanguage(e){localStorage.setItem(this.STORAGE_KEY,e)}setLanguage(e){this.isLanguageSupported(e)&&(this.translate.use(e),this.saveLanguage(e),document.documentElement.lang=e)}getCurrentLanguage(){return this.translate.currentLang||this.DEFAULT_LANGUAGE}getCurrentLanguageName(){let e=this.getCurrentLanguage(),a=this.availableLanguages.find(s=>s.code===e);return a?a.name:this.DEFAULT_LANGUAGE}static \u0275fac=function(a){return new(a||t)(i(l))};static \u0275prov=r({token:t,factory:t.\u0275fac,providedIn:"root"})};var g=class t{STORAGE_KEY="cookie_consent";ESSENTIAL_COOKIES_ENABLED=!0;preferencesSignal=o(null);preferences=this.preferencesSignal.asReadonly();hasConsent=n(()=>this.preferencesSignal()!==null);showBanner=n(()=>!this.hasConsent());essentialEnabled=n(()=>this.ESSENTIAL_COOKIES_ENABLED);analyticsEnabled=n(()=>this.preferencesSignal()?.analytics??!1);marketingEnabled=n(()=>this.preferencesSignal()?.marketing??!1);constructor(){this.loadPreferences()}loadPreferences(){if(!(typeof window>"u"||!window.localStorage))try{let e=localStorage.getItem(this.STORAGE_KEY);if(e){let a=JSON.parse(e);this.preferencesSignal.set(a)}}catch(e){console.error("Error al cargar preferencias de cookies:",e)}}savePreferences(e){if(!(typeof window>"u"||!window.localStorage))try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e)),this.preferencesSignal.set(e)}catch(a){console.error("Error al guardar preferencias de cookies:",a)}}acceptAll(){let e={essential:!0,analytics:!0,marketing:!0,timestamp:Date.now()};this.savePreferences(e)}rejectNonEssential(){let e={essential:!0,analytics:!1,marketing:!1,timestamp:Date.now()};this.savePreferences(e)}saveCustomPreferences(e){let a=this.preferencesSignal()||{essential:!0,analytics:!1,marketing:!1,timestamp:Date.now()},s={essential:!0,analytics:e.analytics??a.analytics,marketing:e.marketing??a.marketing,timestamp:Date.now()};this.savePreferences(s)}isCategoryEnabled(e){switch(e){case"essential":return this.essentialEnabled();case"analytics":return this.analyticsEnabled();case"marketing":return this.marketingEnabled();default:return!1}}resetPreferences(){typeof window<"u"&&window.localStorage&&(localStorage.removeItem(this.STORAGE_KEY),this.preferencesSignal.set(null))}static \u0275fac=function(a){return new(a||t)};static \u0275prov=r({token:t,factory:t.\u0275fac,providedIn:"root"})};export{g as a,c as b};
