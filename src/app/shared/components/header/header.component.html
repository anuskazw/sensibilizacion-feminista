<header class="header" role="banner">
  <div class="header-container">
    <!-- Logo y tÃ­tulo -->
    <div class="header-brand">
      <a routerLink="/" class="brand-link" [attr.aria-label]="'app.title' | translate">
        <h1 class="brand-title">{{ 'app.title' | translate }}</h1>
        <p class="brand-subtitle">{{ 'app.subtitle' | translate }}</p>
      </a>
    </div>

    <!-- BotÃ³n menÃº mÃ³vil -->
    <button
      class="mobile-menu-button"
      (click)="toggleMobileMenu()"
      [attr.aria-expanded]="isMobileMenuOpen"
      [attr.aria-label]="'header.menu' | translate"
      [attr.aria-controls]="'mobile-nav-menu'"
      type="button">
      <span class="hamburger-icon" [class.open]="isMobileMenuOpen">
        <span></span>
        <span></span>
        <span></span>
      </span>
    </button>

    <!-- NavegaciÃ³n principal -->
    <nav
      class="header-nav"
      id="mobile-nav-menu"
      role="navigation"
      [attr.aria-label]="'header.home' | translate"
      [class.mobile-menu-open]="isMobileMenuOpen">
      <ul class="nav-list">
        <li class="nav-item">
          <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link" (click)="closeMobileMenu()">
            {{ 'header.home' | translate }}
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/historia" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            {{ 'header.history' | translate }}
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/conceptos" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            {{ 'header.concepts' | translate }}
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/violencia" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            {{ 'header.violence' | translate }}
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/recursos" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            {{ 'header.resources' | translate }}
          </a>
        </li>
        <li class="nav-item">
          <a routerLink="/ayuda" routerLinkActive="active" class="nav-link" (click)="closeMobileMenu()">
            {{ 'header.help' | translate }}
          </a>
        </li>
      </ul>
    </nav>

    <!-- Selector de idioma -->
    <div class="language-selector" role="region" [attr.aria-label]="'language.selector' | translate">
      <button
        class="language-button"
        (click)="toggleLanguageMenu()"
        [attr.aria-expanded]="isLanguageMenuOpen"
        [attr.aria-label]="'language.selector' | translate"
        type="button">
        <span class="language-icon">ğŸŒ</span>
        <span class="language-text">{{ getCurrentLanguageName() }}</span>
        <span class="language-arrow" [class.open]="isLanguageMenuOpen">â–¼</span>
      </button>

      <ul
        class="language-menu"
        [class.show]="isLanguageMenuOpen"
        role="menu"
        [attr.aria-hidden]="!isLanguageMenuOpen">
        <li
          *ngFor="let lang of availableLanguages; let i = index"
          class="language-item"
          role="none">
          <button
            #languageOption
            class="language-option"
            [class.active]="lang.code === currentLanguage"
            (click)="changeLanguage(lang.code)"
            (keydown.enter)="changeLanguage(lang.code)"
            (keydown.space)="changeLanguage(lang.code); $event.preventDefault()"
            [attr.aria-current]="lang.code === currentLanguage ? 'true' : null"
            role="menuitem"
            type="button">
            {{ lang.name }}
            <span *ngIf="lang.code === currentLanguage" class="check-icon" aria-hidden="true">âœ“</span>
          </button>
        </li>
      </ul>
    </div>
  </div>
</header>

